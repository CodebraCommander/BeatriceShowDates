<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beatrice in Beauty and the Beast - Tour Dates</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            line-height: 1.6;
            color: #2c1810;
            background: linear-gradient(135deg, #f8f4e6 0%, #e8dcc0 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header {
            text-align: center;
            padding: 2rem 0;
            background: linear-gradient(135deg, #4a2c6a 0%, #2d1b4e 100%);
            color: white;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="30" r="2" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="20" r="1.5" fill="rgba(255,255,255,0.1)"/><circle cx="60" cy="70" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="30" cy="80" r="1.5" fill="rgba(255,255,255,0.1)"/></svg>') repeat;
            animation: sparkle 3s ease-in-out infinite;
        }

        @keyframes sparkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.8; }
        }

        .logo {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            position: relative;
            z-index: 1;
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .beatrice-section {
            background: white;
            margin: 2rem 0;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
        }

        .beatrice-photo-placeholder {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            margin: 0 auto 1.5rem;
            border: 5px solid #d4af37;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            background: linear-gradient(135deg, #f8f4e6 0%, #e8dcc0 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .photo-icon {
            font-size: 4rem;
            margin-bottom: 0.5rem;
        }

        .photo-text {
            font-size: 1rem;
            color: #4a2c6a;
            font-weight: bold;
        }

        .beatrice-name {
            font-size: 2rem;
            color: #4a2c6a;
            margin-bottom: 0.5rem;
            font-weight: bold;
        }

        .beatrice-role {
            font-size: 1.3rem;
            color: #8b4513;
            font-style: italic;
            margin-bottom: 1rem;
        }

        .beatrice-description {
            font-size: 1.1rem;
            color: #555;
            max-width: 600px;
            margin: 0 auto;
        }

        .shows-section {
            margin: 2rem 0;
        }

        .section-title {
            text-align: center;
            font-size: 2.2rem;
            color: #4a2c6a;
            margin-bottom: 2rem;
            font-weight: bold;
        }

        .city-group {
            background: white;
            margin-bottom: 2rem;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .city-header {
            background: linear-gradient(135deg, #4a2c6a 0%, #6a4c8a 100%);
            color: white;
            padding: 1.5rem;
            text-align: center;
        }

        .city-name {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 0.3rem;
        }

        .city-dates {
            font-size: 1rem;
            opacity: 0.85;
            margin-bottom: 0.5rem;
            font-style: italic;
        }

        .venue-name {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .shows-grid {
            padding: 1.5rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .show-card {
            background: linear-gradient(135deg, #fff 0%, #f8f6f0 100%);
            border: 2px solid #e0d5b7;
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .show-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #d4af37, #f4d03f, #d4af37);
        }

        .show-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
            border-color: #d4af37;
        }

        .show-date {
            font-size: 1.3rem;
            font-weight: bold;
            color: #4a2c6a;
            margin-bottom: 0.5rem;
        }

        .show-time {
            font-size: 1.1rem;
            color: #8b4513;
            margin-bottom: 0.5rem;
        }

        .show-type {
            display: inline-block;
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .show-type.matinee {
            background: linear-gradient(135deg, #87CEEB 0%, #4169E1 100%);
            box-shadow: 0 2px 8px rgba(65, 105, 225, 0.3);
        }

        .show-type.evening {
            background: linear-gradient(135deg, #2C1810 0%, #8B4513 100%);
            box-shadow: 0 2px 8px rgba(44, 24, 16, 0.4);
        }

        .show-type.put-in {
            background: linear-gradient(135deg, #FF6B35 0%, #D2691E 100%);
            box-shadow: 0 2px 8px rgba(255, 107, 53, 0.3);
        }

        .show-type.tba {
            background: linear-gradient(135deg, #9B59B6 0%, #8E44AD 100%);
            box-shadow: 0 2px 8px rgba(155, 89, 182, 0.3);
        }

        .availability-info {
            background: linear-gradient(135deg, #e8f5e8 0%, #d4edda 100%);
            border: 1px solid #28a745;
            color: #155724;
            padding: 0.8rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            font-weight: bold;
            text-align: center;
        }

        .availability-info.no-seats {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border-color: #ffc107;
            color: #856404;
        }

        .tba-card {
            border: 2px dashed #9B59B6;
            background: linear-gradient(135deg, #f8f4ff 0%, #f0ebff 100%);
        }

        .tba-card::before {
            background: linear-gradient(90deg, #9B59B6, #8E44AD, #9B59B6);
        }

        .button-group {
            display: flex;
            flex-direction: row;
            gap: 0.5rem;
        }

        .tickets-btn {
            background: linear-gradient(135deg, #d4af37 0%, #f4d03f 100%);
            color: #2c1810;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 50%;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .calendar-btn {
            background: linear-gradient(135deg, #4a2c6a 0%, #6a4c8a 100%);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 50%;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .purchase-btn {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 50%;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .calendar-btn:hover {
            background: linear-gradient(135deg, #5a3c7a 0%, #7a5c9a 100%);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(74, 44, 106, 0.3);
        }

        .tickets-btn:hover {
            background: linear-gradient(135deg, #e4bf47 0%, #f4e04f 100%);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3);
        }

        .purchase-btn:hover {
            background: linear-gradient(135deg, #218838 0%, #1cc88a 100%);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
        }

        .footer {
            text-align: center;
            padding: 2rem;
            background: #4a2c6a;
            color: white;
            margin-top: 3rem;
        }

        .update-note {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #8b6914;
            padding: 1rem;
            border-radius: 10px;
            margin: 2rem 0;
            text-align: center;
            font-weight: bold;
        }

        .loading {
            text-align: center;
            padding: 2rem;
            font-size: 1.2rem;
            color: #4a2c6a;
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 15px;
            }
            
            .logo {
                font-size: 2rem;
            }
            
            .shows-grid {
                grid-template-columns: 1fr;
                padding: 1rem;
            }
            
            .beatrice-section {
                padding: 1.5rem;
            }
            
            .beatrice-photo-placeholder {
                width: 150px;
                height: 150px;
            }
            
            .photo-icon {
                font-size: 3rem;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <h1 class="logo">ðŸŒ¹ Beauty and the Beast ðŸŒ¹</h1>
            <p class="subtitle">The Musical</p>
        </div>
    </div>

    <div class="container">
        <div class="beatrice-section">
           <img src="profile-pic.png" alt="Beatrice" class="beatrice-photo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
            <h2 class="beatrice-name">Beatrice</h2>
            <p class="beatrice-role">as Chip in Disney's Beauty and the Beast</p>
            <p class="beatrice-description">
                Join us as Beatrice brings the beloved character of Chip to life in Disney's enchanting musical adaptation of Beauty and the Beast. Follow along to see when she'll be performing in this magical production!
            </p>
        </div>

        <div class="update-note">
            ðŸ“… More tour dates will be announced soon! Check back regularly for updates.
        </div>

        <div class="shows-section">
            <h2 class="section-title">ðŸŽ­ Upcoming Performances</h2>
            <div id="loading" class="loading">ðŸŽ­ Loading performance dates...</div>
            <div id="shows-container" style="display: none;"></div>
        </div>
    </div>

    <div class="footer">
        <div class="container">
            <p>&copy; 2025 - Come see Beatrice shine as Chip! âœ¨</p>
            <p>Disney's Beauty and the Beast - The Musical</p>
        </div>
    </div>

    <script>
        // Replace this URL with your Google Apps Script web app URL
        const GOOGLE_SHEETS_URL = 'https://script.google.com/macros/s/AKfycbxObNYSY8CV0bccHpZieALvRDEC3yvUnls-TvRJ2i1zSxvx9yLTSIiq6QtB4rSu9Hj7/exec';
        
        // Future cities with date ranges but TBA performances
        const futureCities = [
            {
                "city": "Minneapolis, MN",
                "venue": "Orpheum Theatre",
                "dates": "Aug 5 - Aug 17",
                "address": "910 Hennepin Ave, Minneapolis, MN 55403"
            },
            {
                "city": "Buffalo, NY",
                "venue": "Shea's Buffalo Theatre",
                "dates": "Aug 20 - Aug 24",
                "address": "646 Main St, Buffalo, NY 14202"
            },
            {
                "city": "Durham, NC",
                "venue": "Durham Performing Arts Center (DPAC)",
                "dates": "Sep 2 - Sep 14",
                "address": "123 Vivian St, Durham, NC 27701"
            },
            {
                "city": "North Charleston, SC",
                "venue": "North Charleston Performing Arts Center",
                "dates": "Sep 16 - Sep 21",
                "address": "5001 Coliseum Dr, North Charleston, SC 29418"
            },
            {
                "city": "Greensboro, NC",
                "venue": "Steven Tanger Center for the Performing Arts",
                "dates": "Sep 23 - Sep 28",
                "address": "One Abe Brenner Place, 300 N Elm St, Greensboro, NC 27401"
            },
            {
                "city": "Detroit, MI",
                "venue": "Fisher Theatre",
                "dates": "Oct 1 - Oct 12",
                "address": "3011 W Grand Blvd, Detroit, MI 48202"
            },
            {
                "city": "East Lansing, MI",
                "venue": "Wharton Center for Performing Arts",
                "dates": "Oct 14 - Oct 19",
                "address": "750 E Shaw Ln, East Lansing, MI 48824"
            },
            {
                "city": "Appleton, WI",
                "venue": "Fox Cities Performing Arts Center",
                "dates": "Oct 21 - Oct 26",
                "address": "400 W College Ave, Appleton, WI 54911"
            },
            {
                "city": "Kansas City, MO",
                "venue": "Music Hall",
                "dates": "Oct 28 - Nov 2",
                "address": "Music Hall, Kansas City, MO"
            },
            {
                "city": "Nashville, TN",
                "venue": "Tennessee Performing Arts Center (TPAC)",
                "dates": "Nov 4 - Nov 16",
                "address": "505 Deaderick St, Nashville, TN 37243"
            }
        ];

        let shows = []; // This will be populated from Google Sheets
        function formatTime(timeStr, timezone = '') {
            // Handle various time formats from Google Sheets
            if (!timeStr) return 'TBA';
            
            // If it's already a properly formatted time string, return it
            if (typeof timeStr === 'string' && timeStr.match(/^\d{1,2}:\d{2}\s?(AM|PM)$/i)) {
                return `${timeStr} ${timezone}`.trim();
            }
            
            // If it's a date object or ISO string, extract the time
            let date;
            if (typeof timeStr === 'string' && timeStr.includes('T')) {
                date = new Date(timeStr);
            } else if (timeStr instanceof Date) {
                date = timeStr;
            } else {
                // Try to parse as a date
                date = new Date(timeStr);
            }
            
            // Check if the date is valid
            if (isNaN(date.getTime())) {
                return 'TBA';
            }
            
            // Format the time as 12-hour format
            const hours = date.getHours();
            const minutes = date.getMinutes();
            const ampm = hours >= 12 ? 'PM' : 'AM';
            const displayHours = hours % 12 || 12;
            const displayMinutes = minutes.toString().padStart(2, '0');
            
            return `${displayHours}:${displayMinutes} ${ampm} ${timezone}`.trim();
        }

        function formatDate(dateStr) {
            // Handle both MM/DD/YYYY and other date formats
            let date;
            if (typeof dateStr === 'string' && dateStr.includes('/')) {
                const [month, day, year] = dateStr.split('/');
                date = new Date(year, month - 1, day);
            } else {
                date = new Date(dateStr);
            }
            return date.toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
        }

        function formatDateShort(dateStr) {
            let date;
            if (typeof dateStr === 'string' && dateStr.includes('/')) {
                const [month, day, year] = dateStr.split('/');
                date = new Date(year, month - 1, day);
            } else {
                date = new Date(dateStr);
            }
            return date.toLocaleDateString('en-US', { 
                month: 'short', 
                day: 'numeric' 
            });
        }

        function createICalFile(show) {
            let date;
            if (typeof show.Date === 'string' && show.Date.includes('/')) {
                const [month, day, year] = show.Date.split('/');
                date = new Date(year, month - 1, day);
            } else {
                date = new Date(show.Date);
            }
            
            const time = show.Time;
            
            // Convert time to 24-hour format
            const timeStr = time.replace(/(\d+):(\d+) (AM|PM)/, (match, hour, minute, ampm) => {
                let hour24 = parseInt(hour);
                if (ampm === 'PM' && hour24 !== 12) hour24 += 12;
                if (ampm === 'AM' && hour24 === 12) hour24 = 0;
                return `${hour24.toString().padStart(2, '0')}${minute}00`;
            });
            
            // Format date for iCal (YYYYMMDD)
            const calDate = `${date.getFullYear()}${(date.getMonth() + 1).toString().padStart(2, '0')}${date.getDate().toString().padStart(2, '0')}`;
            
            // Calculate end time (assume 3 hours for musical)
            const endDate = new Date(date);
            const startHour = parseInt(timeStr.substring(0, 2));
            const startMinute = parseInt(timeStr.substring(2, 4));
            endDate.setHours(startHour + 3, startMinute);
            const endTimeStr = `${endDate.getHours().toString().padStart(2, '0')}${endDate.getMinutes().toString().padStart(2, '0')}00`;
            const endCalDate = `${endDate.getFullYear()}${(endDate.getMonth() + 1).toString().padStart(2, '0')}${endDate.getDate().toString().padStart(2, '0')}`;
            
            // Create iCal content
            const icalContent = `BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Beatrice Tour//Beauty and the Beast//EN
BEGIN:VEVENT
UID:${Date.now()}@beatrice-tour.com
DTSTAMP:${new Date().toISOString().replace(/[-:]/g, '').split('.')[0]}Z
DTSTART:${calDate}T${timeStr}
DTEND:${endCalDate}T${endTimeStr}
SUMMARY:Beauty and the Beast - Beatrice as Chip
DESCRIPTION:Disney's Beauty and the Beast featuring Beatrice as Chip at ${show.Venue}, ${show.City}, ${show.State ? show.State.toString().trim() : ''}
LOCATION:${show.Venue}, ${show['Venue Address']}
END:VEVENT
END:VCALENDAR`;

            return icalContent;
        }

        function downloadICalFile(show) {
            const icalContent = createICalFile(show);
            const blob = new Blob([icalContent], { type: 'text/calendar;charset=utf-8' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            const dateStr = typeof show.Date === 'string' ? show.Date.replace(/\//g, '-') : show.Date;
            link.download = `beauty-and-beast-${dateStr}.ics`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function requestTickets(show) {
            const city = `${show.City ? show.City.toString().trim() : ''}, ${show.State ? show.State.toString().trim() : ''}`;
            const formattedDate = formatDate(show.Date);
            const subject = encodeURIComponent(`Seeking house seats for ${city} - ${formattedDate} performance`);
            const mailtoLink = `mailto:caitlin.l.goddard@gmail.com?subject=${subject}`;
            window.open(mailtoLink);
        }

        function openTicketPurchase(url) {
            window.open(url, '_blank');
        }

        async function loadShowsFromGoogleSheets() {
            try {
                const response = await fetch(GOOGLE_SHEETS_URL);
                if (!response.ok) {
                    throw new Error('Failed to fetch data from Google Sheets');
                }
                const data = await response.json();
                shows = data;
                
                // Hide loading, show content
                document.getElementById('loading').style.display = 'none';
                document.getElementById('shows-container').style.display = 'block';
                
                renderShows();
            } catch (error) {
                console.error('Error loading shows:', error);
                document.getElementById('loading').innerHTML = 'âŒ Error loading show data. Please check back later.';
            }
        }

        function renderShows() {
            const container = document.getElementById('shows-container');
            const now = new Date();
            now.setHours(0, 0, 0, 0); // Set to start of today
            
            // Filter out past performances
            const upcomingShows = shows.filter(show => {
                let showDate;
                if (typeof show.Date === 'string' && show.Date.includes('/')) {
                    const [month, day, year] = show.Date.split('/');
                    showDate = new Date(year, month - 1, day);
                } else {
                    showDate = new Date(show.Date);
                }
                return showDate >= now;
            });
            
            if (upcomingShows.length === 0 && futureCities.length === 0) {
                container.innerHTML = '<div class="update-note">ðŸŽ­ All scheduled performances have concluded. More dates coming soon!</div>';
                return;
            }
            
            const groupedShows = {};
            
            // Group shows by city
            upcomingShows.forEach(show => {
                const city = show.City ? show.City.toString().trim() : '';
                const state = show.State ? show.State.toString().trim() : '';
                const key = `${city}, ${state}`;
                if (!groupedShows[key]) {
                    groupedShows[key] = {
                        city: city,
                        state: state,
                        venue: show.Venue,
                        shows: []
                    };
                }
                groupedShows[key].shows.push(show);
            });
            
            // Sort shows within each city by date and calculate date ranges
            Object.values(groupedShows).forEach(group => {
                group.shows.sort((a, b) => {
                    let dateA, dateB;
                    if (typeof a.Date === 'string' && a.Date.includes('/')) {
                        const [monthA, dayA, yearA] = a.Date.split('/');
                        dateA = new Date(yearA, monthA - 1, dayA);
                    } else {
                        dateA = new Date(a.Date);
                    }
                    if (typeof b.Date === 'string' && b.Date.includes('/')) {
                        const [monthB, dayB, yearB] = b.Date.split('/');
                        dateB = new Date(yearB, monthB - 1, dayB);
                    } else {
                        dateB = new Date(b.Date);
                    }
                    return dateA - dateB;
                });
                
                // Calculate date range for city header
                const firstShow = group.shows[0];
                const lastShow = group.shows[group.shows.length - 1];
                const firstDate = formatDateShort(firstShow.Date);
                const lastDate = formatDateShort(lastShow.Date);
                group.dateRange = firstDate === lastDate ? firstDate : `${firstDate} - ${lastDate}`;
            });
            
            // Filter out future cities that already have confirmed shows
            const citiesWithShows = Object.keys(groupedShows);
            const filteredFutureCities = futureCities.filter(futureCity => {
                return !citiesWithShows.some(cityWithShows => {
                    const cityName = cityWithShows.split(',')[0].trim();
                    const futureCityName = futureCity.city.split(',')[0].trim();
                    return cityName.toLowerCase() === futureCityName.toLowerCase();
                });
            });
            
            container.innerHTML = '';
            
            // Render confirmed shows first
            Object.values(groupedShows).forEach(group => {
                const cityDiv = document.createElement('div');
                cityDiv.className = 'city-group';
                
                cityDiv.innerHTML = `
                    <div class="city-header">
                        <h3 class="city-name">${group.city}, ${group.state}</h3>
                        <p class="city-dates">${group.dateRange}</p>
                        <p class="venue-name">${group.venue}</p>
                    </div>
                    <div class="shows-grid">
                        ${group.shows.map(show => {
                            const showType = show['Mat/Eve'].toLowerCase() === 'put in' ? 'put-in' : 
                                           show['Mat/Eve'].toLowerCase() === 'matinee' ? 'matinee' : 'evening';
                            const showTypeText = show['Mat/Eve'] === 'Put In' ? 'Put In Rehearsal' : show['Mat/Eve'];
                            const showTypeIcon = showType === 'matinee' ? 'â˜€ï¸' : showType === 'evening' ? 'ðŸŒ™' : 'ðŸŽ­';
                            
                            // Handle availability and pricing
                            const availableSeats = parseInt(show['Available House Seats']) || 0;
                            const ticketPrice = show['Ticket Price'] ? parseFloat(show['Ticket Price']) : 0;
                            const ticketUrl = show['Ticket URL'] || '';
                            
                            let availabilityHtml = '';
                            let buttonHtml = '';
                            
                            if (availableSeats > 0) {
                                availabilityHtml = `<div class="availability-info">ðŸŽŸï¸ ${availableSeats} free house seat${availableSeats > 1 ? 's' : ''} available!</div>`;
                                buttonHtml = `
                                    <button class="tickets-btn" onclick="requestTickets(${JSON.stringify(show).replace(/"/g, '&quot;')})">
                                        ðŸ“§ Request Free Seats
                                    </button>
                                `;
                            } else {
                                availabilityHtml = `<div class="availability-info no-seats">ðŸŽ« Tickets available for $${ticketPrice}</div>`;
                                buttonHtml = ticketUrl ? `
                                    <button class="purchase-btn" onclick="openTicketPurchase('${ticketUrl}')">
                                        ðŸŽ« Buy Tickets
                                    </button>
                                ` : `
                                    <button class="tickets-btn" onclick="requestTickets(${JSON.stringify(show).replace(/"/g, '&quot;')})">
                                        ðŸ“§ Contact for Tickets
                                    </button>
                                `;
                            }
                            
                            return `
                                <div class="show-card">
                                    <div class="show-date">${formatDate(show.Date)}</div>
                                    <div class="show-time">${formatTime(show.Time, show['T/Zone'])}</div>
                                    <div class="show-type ${showType}">${showTypeIcon} ${showTypeText}</div>
                                    ${availabilityHtml}
                                    <div class="button-group">
                                        ${buttonHtml}
                                        <button class="calendar-btn" onclick="downloadICalFile(${JSON.stringify(show).replace(/"/g, '&quot;')})">
                                            ðŸ“… Add to Calendar
                                        </button>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                `;
                
                container.appendChild(cityDiv);
            });
            
            // Render future cities with TBA performances (only those without confirmed shows)
            filteredFutureCities.forEach(futureCity => {
                const cityDiv = document.createElement('div');
                cityDiv.className = 'city-group';
                
                cityDiv.innerHTML = `
                    <div class="city-header">
                        <h3 class="city-name">${futureCity.city}</h3>
                        <p class="city-dates">${futureCity.dates}</p>
                        <p class="venue-name">${futureCity.venue}</p>
                    </div>
                    <div class="shows-grid">
                        <div class="show-card tba-card">
                            <div class="show-date">ðŸŽ­ Shows featuring Beatrice to be announced!</div>
                            <div class="show-time">Check back soon for specific dates and times</div>
                            <div class="show-type tba">ðŸ“… Coming Soon</div>
                        </div>
                    </div>
                `;
                
                container.appendChild(cityDiv);
            });
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            loadShowsFromGoogleSheets();
        });
    </script>
</body>
</html>